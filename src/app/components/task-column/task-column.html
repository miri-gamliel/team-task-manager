<div class="column-container">
  <!-- Column Header -->
  <div class="column-header">
    <div class="header-left">
      <div class="column-icon" [style.background-color]="getColumnColor()">
        <mat-icon>{{ getColumnIcon() }}</mat-icon>
      </div>
      <h3 class="column-title">{{ title() }}</h3>
    </div>
    <div class="task-count-badge" [style.background-color]="getColumnColor()">
      {{ tasks().length }}
    </div>
  </div>

  <!-- Drop List -->
  <div 
    cdkDropList
    [id]="columnId()" 
    [cdkDropListData]="tasks()"
    [cdkDropListConnectedTo]="connectedTo() || []"
    (cdkDropListDropped)="dropped.emit($event)"
    class="task-list"
  >
    @if (tasks().length === 0) {
      <div class="empty-column">
        <mat-icon>inbox</mat-icon>
        <p>אין משימות</p>
      </div>
    }

    @for (task of tasks(); track task.id) {
      <div 
        cdkDrag 
        [cdkDragData]="task"
        class="task-wrapper"
      >
        <app-task-card [task]="task"></app-task-card>
        
        <!-- Placeholder בזמן גרירה -->
        <div class="custom-placeholder" *cdkDragPlaceholder></div>
      </div>
    }
  </div>
</div>